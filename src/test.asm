default		rel

global		asm_function:function
global		get_sum:function

section		.text

;====================================================================================================
; Test function
;====================================================================================================
; Entry:
; Exit:
; Destroys:
;====================================================================================================
asm_function:	xor		rdi,		rdi
		inc		rdi			; rdi = 1 (stdout)
		lea		rsi,		[Message]
		mov		rdx,		MESSAGELEN

		xor		rax,		rax
		inc		rax			; rax = 1 (write)

		syscall

		xor		rax,		rax
		ret
;====================================================================================================

;====================================================================================================
; Returns the sum of two parameters
;====================================================================================================
; Entry:	RDI, RSI	- parameters
; Exit:		RAX = RDI + RSI
; Destroys:	RDI
;====================================================================================================
get_sum:	add		rdi,		rsi
		mov		rax,		rdi
		ret
;====================================================================================================
		
		
section		.data
Message:	db 'Hello, NASM!', 0x0A
MESSAGELEN	equ $ - Message

